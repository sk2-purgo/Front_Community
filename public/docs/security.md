### **보안 지침과 유의사항**

Purgo API는 인증 정보를 기반으로 민감한 문장 분석 기능을 제공합니다.  
특히 **프록시 서버를 통한 JWT 기반 인증 구조**를 채택하고 있으므로, **API Key와 JWT Secret의 안전한 관리**가 필수입니다.

---

### **필수 보안 수칙**

| 항목                | 지켜야 할 내용 |
|---------------------|----------------|
| API Key 보관        | **클라이언트 코드(React, Vue 등)에 절대 포함하지 말고**, 반드시 서버 환경 변수에 저장 |
| JWT 생성 위치       | `X-Auth-Token`은 **반드시 서버에서 생성** (Node.js, Spring 등 백엔드에서 처리) |
| Secret Key 보관     | `.env`, AWS Secrets Manager, Azure Key Vault 등 **외부 보안 저장소에 암호화 보관** |
| 만료 시간 설정      | JWT의 `exp`는 `5~10분 이내`로 설정 권장 |
| 해시 생성 기준      | 요청 본문을 **정렬된 JSON 직렬화 후 SHA-256 해시**한 값을 JWT에 포함 (※ [JWT 해시 생성 가이드] 참고) |

---

### **유출 사고 발생 시 조치**

1. 유출 의심 즉시 **관리자에게 연락**
2. 유출된 키 **즉시 폐기** 및 **신규 발급 요청**
3. 관련 서버 구성 및 설정 **재배포**
4. **접근 로그 검토**로 의심 요청 추적

---

### **주요 상태코드 정리**

| 상태 코드 | 의미 | 발생 조건 요약 |
| --- | --- | --- |
| `200` | 성공 | 비속어가 감지되어 정상 처리되었거나, 비속어 없이도 서버가 정상 응답을 반환했을 때 |
| `400` | 잘못된 요청 | 필수 파라미터 누락 (`text` 없음), JSON 형식 오류, 본문 파싱 실패 등 |
| `401` | 인증 실패 | API Key 미포함/형식 오류, JWT 서명 오류, JWT 만료, 해시 불일치, iat 시간 불일치 |
| `404` | 경로 없음 | 존재하지 않는 URL로 접근한 경우 (예: `/proxy/unknown`) |
| `429` | 요청 한도 초과 | 같은 IP에서 1분 동안 10회를 초과한 요청을 보낸 경우 (rate limit 초과) |
| `500` | 서버 내부 오류 | 비속어가 없는 경우 응답에서 `rewritten_text`가 None이거나 Flask 서버 응답 처리 실패 시, 예외 처리 누락 등 |

---

### **기타 권장사항**

- API Key는 **분기마다 교체**하는 것을 권장합니다.
- **JWT는 프론트엔드에서 절대 생성하거나 노출하지 않아야 합니다.**
- 해시 생성 시 **JSON 직렬화 기준**을 어기면 인증이 거부됩니다.
- 프론트엔드는 욕설 순화 결과만 전달받고, 인증 정보와 해시 처리에는 관여하지 않도록 구성하세요.

---

> **보안은 기능만큼 중요합니다.**  
> 잘못된 키 관리, JWT 구성 실수는 **서비스 중단**이나 **데이터 유출**로 이어질 수 있습니다.
