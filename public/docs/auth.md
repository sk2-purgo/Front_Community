### 인증 방식 이해하기

> Purgo 프록시 서버를 사용할 경우, 다음 **두 가지 인증 헤더**를 함께 사용해야 요청이 처리됩니다:

1. **API Key 인증** - Header: `Authorization`
2. **JWT 서명 기반 요청 무결성 검증** - Header: `X-Auth-Token`

이중 구조를 통해 단순 사용자 인증뿐 아니라, **요청 본문이 위조되지 않았는지**를 함께 검증합니다.

---

### 인증 헤더 예시

```
Authorization: Bearer {API_KEY}
X-Auth-Token: {JWT}
```

> 위 두 개의 헤더는 **모두 필수**입니다.  
> 하나라도 누락되면 `401 Unauthorized` 오류가 발생합니다.

---

### JWT 필드 구성 예시

```json
{
  "iss": "your-system",
  "hash": "본문의 SHA256 해시값",
  "iat": 1747314728,
  "exp": 1747315028
}
```

| 필드명 | 설명 |
|--------|------|
| `iss`  | 발급자 (예: 서비스 시스템명) |
| `hash` | 요청 본문에 대한 SHA-256 해시값 |
| `iat`  | 토큰 발행 시각 (Unix Timestamp) |
| `exp`  | 토큰 만료 시각 (`iat + 300초` 권장) |

> `hash`는 요청 본문(JSON)을 정렬 후 SHA-256으로 해시한 값이며, JWT 전체는 `HS256` 알고리즘으로 **서버에서만** 서명해야 합니다.

---

### 주의사항

- JWT는 **반드시 서버에서 생성**되어야 하며, 클라이언트(JavaScript 등)에서 생성하면 안 됩니다.
- JWT 생성 시 직렬화 규칙을 지키지 않으면 인증이 실패할 수 있습니다.
- 직렬화 및 해시 기준은 [JWT 해시 생성 가이드]를 참조해 주세요.
